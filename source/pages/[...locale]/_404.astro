---
import type { HTMLAttributes } from "astro/types";
import { Icon } from "astro-icon/components";

// This will generate a CSS file with styles already present in the main .css generated by Astro.
// But because we are rendering this page via an AstroContainer we can't reference the same CSS.
// In this case it's fine because each file will be loaded separately, on each respective page.
// See: https://docs.astro.build/en/guides/styling/#url-css-imports
import styles from "@app/styles/index.css?url";
import { ErrorPage } from "@app/layouts";

import { Link } from "@components/base";
import { getLocaleRoute } from "@modules/i18n";

type Props = HTMLAttributes<"body"> & {
  title?: string;
  description?: string;
};

const { locale, translations } = Astro.locals;
const homeLink = getLocaleRoute(locale, "/");
const t = translations.pages.notfound;
---

<ErrorPage
  class="grid overflow-clip"
  seo={{
    title: t.meta.title,
    description: t.meta.description,
    canonicalPathname: "/404",

    /* For some reason Astro.site is not set with how we have setup 404 pages. */
    site: "https://ivanporto.io",
    noindex: true,
    nofollow: true,
  }}
>
  <Fragment slot="head">
    <link
      rel="stylesheet"
      href={styles}
    />
  </Fragment>

  <div class="mx-auto max-w-xl self-center p-12 text-center">
    <h1>
      <span
        class="block text-5xl font-black tabular-nums tracking-widest text-primary"
      >
        404
      </span>
      <span class="mt-2 block text-xl font-semibold">{t.headline}</span>
    </h1>

    <p class="mt-4 text-base text-foreground/80">
      {t.text}
    </p>

    <Link
      class="group/back mt-8 inline-flex h-10 items-center justify-center whitespace-nowrap rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
      href={homeLink}
      hreflang={locale}
      label={t.label}
    >
      <Icon
        name="lucide:arrow-left"
        class="mr-2 size-[1.1em] transition-transform group-hover/back:-translate-x-1"
      />
      <span> {t.back} </span>
    </Link>
  </div>
</ErrorPage>
